---
id: SPEC-TaskFlow-001
project: TaskFlow - タスク管理アプリ
version: 1.0.0
last_updated: 2025-10-16T00:00:00Z
status: Review
owner: Development Team
---

# 0. エグゼクティブサマリー

## 背景・目的

個人やチームでタスクを効率的に管理できる Web アプリケーション「TaskFlow」を開発する。既存ツールの複雑さを解消し、シンプルで直感的な UI による使いやすさを最優先とする。

## 成功指標（KPI/SLA）

- 月間アクティブユーザー数: 1000 人以上（リリース後 6 ヶ月）
- ユーザー満足度: 4.0/5.0 以上
- タスク完了率: 70%以上
- システム可用性: 99%以上
- 画面遷移時間: p95 で 1 秒以内

---

# 1. コンテキストとスコープ

## 対象範囲（In Scope）

- タスクの CRUD 操作
- ユーザー認証・認可
- タスクフィルタリング・ソート機能
- 期限通知機能
- マルチデバイス対応（レスポンシブデザイン）
- リアルタイム同期

## 非対象範囲（Out of Scope）

- チームコラボレーション機能（v1 では個人利用のみ）
- カレンダー統合
- サードパーティ連携（Slack、GitHub 等）
- モバイルネイティブアプリ
- オフライン機能

## 関係者・責任分担（RACI）

- プロダクトオーナー: Accountable（意思決定）
- 開発チーム（2-3 名）: Responsible（実装）
- デザイナー: Consulted（UI/UX 設計）
- エンドユーザー: Informed（フィードバック提供）

## 前提条件

- ユーザーはインターネット接続環境がある
- モダンブラウザ（Chrome、Firefox、Safari、Edge 最新版）を使用
- メールアドレスを持っている

## 制約条件

- **技術**: オープンソース技術を優先（予算制約）
- **組織**: 開発チーム 2-3 名、開発期間 3 ヶ月
- **法的**: GDPR、個人情報保護法に準拠

## 依存関係

- メール送信サービス（通知用）
- クラウドホスティングサービス
- 外部認証プロバイダー（OAuth 連携）

---

# 2. ユーザーとジョブ

## ペルソナ一覧

### ペルソナ 1: 個人ユーザー（太郎さん、28 歳、会社員）

- **ニーズ**: 仕事とプライベートのタスクを一元管理したい
- **ペインポイント**: 既存ツールは機能が多すぎて使いこなせない
- **IT リテラシー**: 中程度

### ペルソナ 2: フリーランサー（花子さん、35 歳）

- **ニーズ**: 複数プロジェクトのタスクを効率的に管理したい
- **ペインポイント**: 期限管理が煩雑で漏れが発生する
- **IT リテラシー**: 高い

## 主なジョブ・トゥ・ビー・ダン（JTBD）

1. 思いついたタスクをすぐに記録したい
2. 今日やるべきタスクを一目で確認したい
3. 完了したタスクを達成感とともに記録したい
4. 期限が近いタスクを見逃さないようにしたい
5. タスクの優先順位を柔軟に変更したい

## ユーザージャーニー

### ハッピーパス: 新規タスク作成から完了まで

1. ログイン
2. ダッシュボードでタスク一覧を確認
3. 「新規タスク」ボタンをクリック
4. タイトル、説明、期限、優先度を入力
5. 「保存」をクリック
6. タスク一覧に新しいタスクが表示される
7. タスクを実行
8. 完了チェックボックスをクリック
9. タスクが完了済みリストに移動

### 例外パス: ネットワークエラー時

1. タスク保存時にネットワークエラー発生
2. エラーメッセージ表示「ネットワークエラーが発生しました。再試行してください。」
3. ローカルストレージに一時保存
4. ネットワーク復旧後、自動再送信

---

# 3. 機能要件（Functional Requirements）

## FR-001: ユーザー登録

- **概要**: メールアドレスとパスワードで新規ユーザー登録
- **優先度**: Must
- **関連 AC**: [AC-001, AC-002]

## FR-002: ログイン/ログアウト

- **概要**: 認証情報によるログイン・ログアウト機能
- **優先度**: Must
- **関連 AC**: [AC-003, AC-004]

## FR-003: タスク作成

- **概要**: タイトル、説明、期限、優先度を指定してタスク作成
- **優先度**: Must
- **関連 AC**: [AC-005, AC-006]

## FR-004: タスク編集

- **概要**: 既存タスクの情報を編集
- **優先度**: Must
- **関連 AC**: [AC-007]

## FR-005: タスク削除

- **概要**: タスクの削除（論理削除）
- **優先度**: Must
- **関連 AC**: [AC-008]

## FR-006: タスク完了切り替え

- **概要**: タスクの完了/未完了ステータスを切り替え
- **優先度**: Must
- **関連 AC**: [AC-009]

## FR-007: タスク一覧表示

- **概要**: タスク一覧をフィルタリング・ソート可能な形で表示
- **優先度**: Must
- **関連 AC**: [AC-010, AC-011]

## FR-008: タスクフィルタリング

- **概要**: ステータス、優先度、期限でフィルタリング
- **優先度**: Should
- **関連 AC**: [AC-012]

## FR-009: タスクソート

- **概要**: 作成日、期限、優先度でソート
- **優先度**: Should
- **関連 AC**: [AC-013]

## FR-010: 期限通知

- **概要**: 期限が近いタスク（24 時間前、1 時間前）をメールで通知
- **優先度**: Should
- **関連 AC**: [AC-014]

## FR-011: プロフィール編集

- **概要**: ユーザー名、メールアドレス、パスワード変更
- **優先度**: Must
- **関連 AC**: [AC-015]

---

# 4. 非機能要件（Non-Functional Requirements）

## NFR-001: パフォーマンス

- 画面遷移時間: p95 で 1 秒以内
- タスク一覧表示（100 件）: 500ms 以内
- API 応答時間: p95 で 200ms 以内
- 同時アクセスユーザー数: 100 人まで対応

## NFR-002: 可用性

- システム稼働率: 99%以上（年間ダウンタイム 3.65 日以内）
- RTO（目標復旧時間）: 1 時間以内
- RPO（目標復旧時点）: 15 分以内

## NFR-003: セキュリティ/プライバシー

- パスワードは bcrypt でハッシュ化（ソルト付き）
- 通信は HTTPS（TLS 1.3）で暗号化
- セッショントークンの有効期限: 24 時間
- PII（個人識別情報）: メールアドレス、ユーザー名
- データ保持期間: アカウント削除後 30 日で完全削除

## NFR-004: 可観測性

- 構造化ログ（JSON 形式）
- 分散トレーシング（OpenTelemetry）
- メトリクス収集（Prometheus 形式）
  - API 応答時間
  - エラー率
  - アクティブユーザー数

## NFR-005: アクセシビリティ

- WCAG 2.1 AA 準拠
- キーボード操作対応
- スクリーンリーダー対応
- コントラスト比 4.5:1 以上

## NFR-006: コンプライアンス/法令

- GDPR 準拠（EU 域内ユーザー対象時）
- 個人情報保護法準拠
- プライバシーポリシーの明示
- データエクスポート機能（ユーザーの権利）

---

# 5. インターフェース仕様

## 外部 API

- **メール送信 API**: SendGrid / AWS SES
  - バージョン: v3
  - レート制限: 100 通/分
  - 用途: 通知メール送信

## UI/UX 原則

- **ナビゲーション**: シングルページアプリケーション（SPA）
- **レスポンシブ**: モバイルファースト設計
  - ブレークポイント: 768px（タブレット）、1024px（デスクトップ）
- **多言語対応**: 初期は日本語のみ（将来的に英語追加予定）
- **カラースキーム**: ライトモード/ダークモード切り替え

## データ契約

- **API 形式**: RESTful JSON API
- **日時フォーマット**: ISO 8601 (UTC)
- **ID ルール**: UUID v4
- **バージョニング**: URL パスでバージョン指定（/api/v1/）

---

# 6. データモデル

## エンティティとライフサイクル

### User（ユーザー）

- **属性**: id, email, password_hash, name, created_at, updated_at
- **ライフサイクル**: 登録 → アクティブ → 削除（論理削除）

### Task（タスク）

- **属性**: id, user_id, title, description, due_date, priority, status, created_at, updated_at, deleted_at
- **ライフサイクル**: 作成 → 編集 → 完了 → 削除（論理削除）
- **ステータス**: pending, in_progress, completed, deleted
- **優先度**: low, medium, high

## 整合性ルール

- Task は User に必ず紐づく（外部キー制約）
- deleted_at が NULL でないタスクは一覧表示しない
- due_date は作成日時以降の日時のみ許可

---

# 7. 受け入れ基準（Acceptance Criteria）

## AC-001: ユーザー登録（FR-001 対応）

- **Given**: 未登録ユーザーが登録ページにアクセス
- **When**: 有効なメールアドレスとパスワード（8 文字以上）を入力して送信
- **Then**:
  - ユーザーアカウントが作成される
  - 確認メールが送信される
  - ログイン画面にリダイレクトされる

## AC-002: ユーザー登録失敗（FR-001 対応）

- **Given**: 登録ページにアクセス
- **When**: 既に登録済みのメールアドレスを入力
- **Then**:
  - エラーメッセージ「このメールアドレスは既に登録されています」が表示される
  - アカウントは作成されない

## AC-003: ログイン成功（FR-002 対応）

- **Given**: 登録済みユーザー
- **When**: 正しいメールアドレスとパスワードを入力してログイン
- **Then**:
  - セッショントークンが発行される
  - ダッシュボードにリダイレクトされる
  - タスク一覧が表示される

## AC-004: ログアウト（FR-002 対応）

- **Given**: ログイン済みユーザー
- **When**: ログアウトボタンをクリック
- **Then**:
  - セッションが破棄される
  - ログインページにリダイレクトされる

## AC-005: タスク作成成功（FR-003 対応）

- **Given**: ログイン済みユーザーがタスク作成画面にアクセス
- **When**: タイトル、説明、期限、優先度を入力して保存
- **Then**:
  - タスクが作成される（status は pending）
  - タスク一覧画面にリダイレクトされる
  - 作成されたタスクが一覧に表示される

## AC-006: タスク作成失敗（FR-003 対応）

- **Given**: タスク作成画面にアクセス
- **When**: タイトルを空欄で保存しようとする
- **Then**:
  - エラーメッセージ「タイトルは必須です」が表示される
  - タスクは作成されない

## AC-007: タスク編集（FR-004 対応）

- **Given**: 既存タスクが表示されている
- **When**: タスクをクリックして編集画面に移動し、内容を変更して保存
- **Then**:
  - タスク情報が更新される
  - updated_at が現在時刻に更新される
  - 一覧画面に戻り、更新内容が反映される

## AC-008: タスク削除（FR-005 対応）

- **Given**: タスク一覧が表示されている
- **When**: タスクの削除ボタンをクリックして確認
- **Then**:
  - deleted_at に現在時刻が設定される（論理削除）
  - 一覧から非表示になる
  - 削除完了メッセージが表示される

## AC-009: タスク完了切り替え（FR-006 対応）

- **Given**: 未完了タスクが表示されている
- **When**: 完了チェックボックスをクリック
- **Then**:
  - status が completed に変更される
  - 視覚的に完了状態（グレーアウト、取り消し線）が表示される
  - 完了日時が記録される

## AC-010: タスク一覧表示（FR-007 対応）

- **Given**: ログイン済みユーザー
- **When**: ダッシュボードにアクセス
- **Then**:
  - ユーザーが作成した未削除タスクが表示される
  - 各タスクにタイトル、期限、優先度、ステータスが表示される
  - ページネーション（20 件/ページ）で表示される

## AC-011: 空のタスク一覧（FR-007 対応）

- **Given**: タスクを 1 件も作成していないユーザー
- **When**: ダッシュボードにアクセス
- **Then**:
  - 「タスクがありません」メッセージが表示される
  - 「新規タスク作成」ボタンが表示される

## AC-012: タスクフィルタリング（FR-008 対応）

- **Given**: タスク一覧が表示されている
- **When**: フィルタで「優先度: 高」を選択
- **Then**:
  - 優先度が高いタスクのみが表示される
  - フィルタ条件が UI 上に表示される

## AC-013: タスクソート（FR-009 対応）

- **Given**: タスク一覧が表示されている
- **When**: ソート条件で「期限の近い順」を選択
- **Then**:
  - タスクが期限の近い順に並び替えられる
  - ソート条件が UI 上に表示される

## AC-014: 期限通知（FR-010 対応）

- **Given**: 明日が期限のタスクが存在する
- **When**: システムの定期バッチ処理が実行される（1 日 1 回）
- **Then**:
  - ユーザーにメールで通知が送信される
  - 通知には該当タスクのタイトルと期限が含まれる

## AC-015: プロフィール編集（FR-011 対応）

- **Given**: ログイン済みユーザーがプロフィール画面にアクセス
- **When**: ユーザー名を変更して保存
- **Then**:
  - ユーザー名が更新される
  - 「保存しました」メッセージが表示される
  - 変更内容がすぐに反映される

---

# 8. リスクと対策

## R-001: パフォーマンス劣化

- **リスク**: ユーザー数増加に伴うレスポンス低下
- **対策**:
  - データベースインデックス最適化
  - CDN 導入
  - キャッシュ戦略（Redis）
- **発火条件**: 同時アクセス 100 人超過
- **担当者**: インフラ担当

## R-002: データ損失

- **リスク**: 障害時のデータ損失
- **対策**:
  - 定期バックアップ（日次、週次）
  - レプリケーション設定
  - 復旧手順書の整備
- **発火条件**: サーバー障害発生
- **担当者**: インフラ担当

## R-003: セキュリティ侵害

- **リスク**: 不正アクセス、データ漏洩
- **対策**:
  - ペネトレーションテスト実施
  - WAF 導入
  - セキュリティ監視（異常検知）
- **発火条件**: 脆弱性発見時
- **担当者**: セキュリティ担当

## R-004: 開発遅延

- **リスク**: 3 ヶ月の開発期間を超過
- **対策**:
  - 2 週間スプリントでの進捗管理
  - 優先度 Must の機能に集中
  - 定期的なステークホルダー報告
- **発火条件**: スプリント目標未達成
- **担当者**: プロダクトオーナー

---

# 9. オープンクエスチョン（未解決項目）

| ID     | 質問内容                                                  | 担当者    | 回答期限   | ブロッカー | 備考                     |
| ------ | --------------------------------------------------------- | --------- | ---------- | ---------- | ------------------------ |
| OQ-001 | OAuth 連携する場合のプロバイダーは？（Google、GitHub 等） | PO        | 2025-10-30 | No         | FR-002 に影響            |
| OQ-002 | タスクの添付ファイル機能は必要か？                        | PO        | 2025-10-30 | No         | v1 スコープ確認          |
| OQ-003 | 通知チャネルはメールのみか？（プッシュ通知、SMS 等）      | PO        | 2025-11-05 | No         | NFR-004 に影響           |
| OQ-004 | データベースは PostgreSQL 想定か？他の選択肢は？          | Tech Lead | 2025-10-25 | Yes        | アーキテクチャ設計に必要 |
| OQ-005 | ホスティング先は？（AWS、GCP、Azure 等）                  | Infra     | 2025-10-25 | Yes        | インフラ設計に必要       |

---

# 10. 変更履歴（Change Log）

- 2025-10-16T00:00:00Z System: 初稿作成（対象 ID: 全体）
- 2025-10-16T10:30:00Z Tamura: FR-001〜FR-011 追加（対象 ID: FR-001〜FR-011）
- 2025-10-16T11:00:00Z Tamura: AC-001〜AC-015 追加（対象 ID: AC-001〜AC-015）
- 2025-10-16T14:00:00Z Tamura: NFR-001〜NFR-006 詳細化（対象 ID: NFR-001〜NFR-006）
- 2025-10-16T15:30:00Z Tamura: リスクと対策セクション追加（対象 ID: R-001〜R-004）
- 2025-10-16T16:00:00Z Tamura: オープンクエスチョン追加（対象 ID: OQ-001〜OQ-005）
